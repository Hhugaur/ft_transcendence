(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=o(a);fetch(a.href,n)}})();class pe{constructor(t,o){this.path=t,this.create=o}make(){return this.create()}getPath(){return this.path}}const O=class O{constructor(){this.appRoot=document.getElementById("app"),this.routes=[]}static getInstance(){return O.INSTANCE||(O.INSTANCE=new O),O.INSTANCE}register(t,o){this.routes.push(new pe(t,o.getElemFactory()))}warp(t,o=!0){const r=this.routes.find(n=>n.getPath()===t);if(!r){console.warn(`unable to find path ${t} returning to home`),t!=="/"&&this.warp("/");return}o&&window.history.pushState(null,"",t);const a=r.make();this.appRoot.replaceChildren(a),this.listeners(a)}launch(){document.addEventListener("DOMContentLoaded",()=>this.launch_impl())}launch_impl(){window.addEventListener("popstate",()=>this.warp(window.location.pathname,!1)),this.warp(window.location.pathname)}listeners(t){t.querySelectorAll("a[data-route]").forEach(o=>{o.removeEventListener("click",te),o.addEventListener("click",te)})}};O.INSTANCE=null;let V=O;function te(e){const o=e.currentTarget.getAttribute("data-route");o&&(e.preventDefault(),V.getInstance().warp(o))}class re{constructor(t){this.factory=t}make(){return this.factory()}getElemFactory(){return this.factory}}class me extends re{constructor(){super(()=>{const t=document.createElement("div");return console.error("unable to use this component's factory"),t}),this.className="",this.textContent="",this.childs=[]}appendChild(t){this.childs.push(t)}appendChilds(t){this.childs.forEach(o=>t.appendChild(o))}setTextContent(t){t.textContent=this.textContent}setClassName(t){t.className=this.className}}class B extends re{constructor(t){super(t)}}class K extends me{constructor(t){super(),this.link=t}make(){const t=document.createElement("a");return t.href="#",t.setAttribute("data-route",this.link),this.setTextContent(t),this.setClassName(t),this.appendChilds(t),t}}const j=e=>{document.body.classList.remove("fade-in"),document.body.classList.add("fade-out"),setTimeout(()=>{history.pushState(null,"",e),window.dispatchEvent(new PopStateEvent("popstate"))},500)},ge={iTitle:"TRANSCENDENCE",iButton1:"Log In",iButton2:"Classic",iButton3:"Tournament",iInput:"Enter your username",iButton4:"Play",disc:"disc",iImagetxt:"Profile picture",iLanguage:"Language",lTitle:"LOGIN",lInput1:"Username",lInput2:"Password",lSubmit:"Log In",lButton1:"Show",lButton2:"Hide",lText:"or",lOther1:"Forgot password",rTitle:"SIGN UP",rInput1:"Username",rInput2:"New password",rSubmit:"Sign Up",rText:"or",pTitle1:"PROFILE",pImage:"Profile picture",pTitle2:"Profile",pTitle3:"Match History",pTitle4:"Friends List",pLabel1:"Username",pLabel2:"Password",pLabel3:"Win Rate",pInput:"Friend's name",pText1:"Date",pText2:"",pText3:"",pText4:"Score",pButton1:"Add",pButton2:"Profile",pButton3:"Match",pButton4:"Delete",back:"back",button:"button"},be={iTitle:"TRANSCENDENCE",iButton1:"Se connecter",iButton2:"Classique",iButton3:"Tournoi",iInput:"Entrez votre pseudo",iButton4:"Jouer",iImagetxt:"Image de profile",iLanguage:"langage",lTitle:"CONNEXION",lInput1:"Nom d'utilisateur",lInput2:"Mot de passe",lSubmit:"Se connecter",lButton1:"Afficher",lButton2:"Masquer",lText:"oû",lOther1:"Mot de passe oublié",rTitle:"INSCRIPTION",rInput1:"Nom d'utilisateur",rInput2:"Nouveau mot de passe",rSubmit:"S'inscrire",pTitle1:"PROFILE",pImage:"Image de profile",pTitle2:"Profile",pTitle3:"Historique de partie",pTitle4:"Liste d'amis",pLabel1:"Nom d'utilisateur",pLabel2:"Mot de passe",pLabel3:"Taux de victoire",pInput:"Nom de l'ami",pText1:"Date",pText2:"",pText3:"",pText4:"Score",pButton1:"Ajouter",pButton2:"Profile",pButton3:"Match",pButton4:"Supprimer",back:"retour",disc:"se deconnecter"},he={iTitle:"TRASCENDENCIA",iButton1:"Iniciar sesión",iButton2:"Clásico",iButton3:"Torneo",iInput:"Ingresa tu nombre de usuario",iButton4:"Jugar",disc:"disc",iImagetxt:"Imagen de perfil",iLanguage:"Idioma",lTitle:"INICIAR SESIÓN",lInput1:"Nombre de usuario",lInput2:"Contraseña",lSubmit:"Iniciar sesión",lButton1:"Mostrar",lButton2:"Ocultar",lText:"o",lOther1:"Olvide contraseña",rTitle:"REGISTRO",rInput1:"Nombre de usuario",rInput2:"Nueva contraseña",rSubmit:"Registrarse",rText:"o",pTitle1:"PERFIL",pImage:"Imagen de perfil",pTitle2:"Perfil",pTitle3:"Historial de partidas",pTitle4:"Lista de amigos",pLabel1:"Nombre de usuario",pLabel2:"Contraseña",pLabel3:"Tasa de victorias",pInput:"Nombre del amigo",pText1:"Fecha",pText2:"",pText3:"",pText4:"Puntuación",pButton1:"Agregar",pButton2:"Perfil",pButton3:"Partida",pButton4:"Eliminar",back:"back"},fe=[{code:"en",label:"English"},{code:"es",label:"Español"},{code:"fr",label:"Français"}],G={en:ge,fr:be,es:he};let ce=Ce(),p={...G[ce]};function xe(e){G[e]?(ce=e,localStorage.setItem("lang",e),Object.assign(p,G[e]),console.log(`Language set to: ${e}`),we()):console.warn(`Language '${e}' not supported.`)}function Ce(){const e=localStorage.getItem("lang");return e&&e in G?e:ve()}function ve(){const e=navigator.language.substring(0,2);return e in G?e:"en"}function Ee(){const e=document.createElement("div");e.className="relative inline-block text-left";const t=document.createElement("button");t.id="dropdownButton",t.className="text-bg0 ml-30 inline-flex justify-center rounded-md shadow-sm px-4 py-2 bg-bg2 text-sm font-medium hover:bg-txt1 hover",t.innerHTML=`
    ${p.language||"Language"}
    <svg class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
    </svg>
  `;const o=document.createElement("div");o.className="hidden text-bg0 origin-top-right absolute right-0 mt-2 w-[50%] rounded-md bg-bg0 ring-1 ring-black ring-opacity-5 z-10";const r=document.createElement("div");return r.className="py-1",fe.forEach(({code:a,label:n})=>{const s=document.createElement("a");s.href="#",s.textContent=n,s.className="block text-center py-2 text-sm bg-txt0 text-bg0 hover:bg-txt1",s.addEventListener("click",c=>{c.preventDefault(),xe(a),t.innerHTML=`
        ${p.language||"Language"}
        <svg class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      `,o.classList.add("hidden")}),r.appendChild(s)}),o.appendChild(r),e.appendChild(t),e.appendChild(o),t.addEventListener("click",a=>{a.stopPropagation(),o.classList.toggle("hidden")}),window.addEventListener("click",a=>{e.contains(a.target)||o.classList.add("hidden")}),e}function we(){document.querySelectorAll("[data-i18n]").forEach(e=>{const t=e.dataset.i18n;p[t]&&(e.textContent=p[t])})}let Q;const ne=V.getInstance(),ye=()=>{{const e=document.createElement("div");e.className="flex text-bg0 justify-end mr-10 mt-4";const t=document.createElement("button");return t.className="px-15 py-5 bg-bg2 rounded-2xl grayscale-50 underline hover:cursor-pointer transition-all duration-300 ease-in-out hover:scale-105 hover:shadow-md",t.textContent=p.iButton1,t.addEventListener("click",o=>{o.preventDefault(),j("/login")}),e.appendChild(t),Q=0,e}},Ne=()=>{const e=document.createElement("div");e.className="flex flex-col items-center text-2xl text-bg0";const t=document.createElement("button");t.className="hover:cursor-pointer mt-70 px-20 py-5 bg-bg2 rounded-2xl transition-all duration-300 ease-in-out hover:scale-105 hover:shadow-md",t.textContent=p.iButton2;const o=document.createElement("button");o.className="hover:cursor-pointer mt-10 px-20 py-5 bg-bg2 rounded-2xl transition-all duration-300 ease-in-out hover:scale-105 hover:shadow-md",o.textContent=p.iButton3;let r="classic";const a=()=>{const s=document.createElement("input");s.type="text",s.placeholder=p.iInput,s.className=`hover:cursor-pointer text-center mx-auto mt-70 px-15 py-5 bg-bg2 rounded-2xl
		transition-all duration-300 ease-in-out focus:scale-105 focus:shadow-md focus:outline-none`,e.replaceChild(s,t);const c=document.createElement("button");c.textContent=p.iButton4,c.className=`hover:cursor-pointer mx-auto mt-10 px-17 py-5 bg-bg2 rounded-2xl
    	transition-all duration-300 ease-in-out hover:scale-105 hover:shadow-md hover:bg-bg3`,c.addEventListener("click",()=>{const i=s.value.trim();if(i.length===0){alert("Veuillez entrer un pseudo.");return}localStorage.setItem("guestName",i),r==="classic"?ne.warp("/game",!1):ne.warp("/tournament",!1)}),e.replaceChild(c,o)},n=s=>{r=s,Q===1?window.location.href=s==="classic"?"/game":"/tournament":a()};return t.addEventListener("click",()=>n("classic")),o.addEventListener("click",()=>n("tournament")),e.appendChild(t),e.appendChild(o),e},Le=new B(()=>{document.body.classList.remove("fade-out"),document.body.classList.add("fade-in"),document.body.classList.remove("bg-bg2"),document.body.classList.add("bg-bg1");const e=document.createElement("div");e.appendChild(ye());const t=document.createElement("div");t.className="flex flex-col items-center mx-[25%] bg-bg11 -mt-10 p-7 rounded-3xl";const o=document.createElement("p");return o.className="text-8xl hover:cursor-default font-bitcount text-bg0",o.textContent=p.iTitle,t.appendChild(o),e.appendChild(t),e.appendChild(Ne()),e.appendChild(Ee()),e});function S(e,t,o,r){const a=document.createElement("input");return a.type=e,t&&(a.placeholder=t),a.id=o,a.className=r,a}function oe(e,t,o){const r=document.createElement("div"),a=document.createElement("label");a.className="text-bg0 ml-1",a.textContent=e;const n=document.createElement("p");n.className="text-center p-2 bg-txt0 text-bg0 text-xl rounded-sm cursor-pointer ml-1 mr-[40%]",n.textContent=t;const s=document.createElement("input");e=="Password :"?(s.className="hidden p-2 bg-bg0 text-center rounded-sm flex",s.type="password"):(s.className="hidden p-2 bg-bg0 text-center rounded-sm ml-2 mt-1 flex",s.type="text"),s.value=t;let c=t,i=!1;n.addEventListener("click",()=>{n.classList.add("hidden"),s.classList.remove("hidden"),l&&l.classList.remove("hidden"),s.value=c,s.focus(),s.select()}),s.addEventListener("keydown",u=>{if(u.key==="Enter"){const b=s.value.trim();b!==c&&(c=b,e==="Password :"?n.textContent="••••••":n.textContent=b),i=!0,s.classList.add("hidden"),n.classList.remove("hidden"),l&&l.classList.add("hidden")}u.key==="Escape"&&(s.value=c,i=!1,s.classList.add("hidden"),n.classList.remove("hidden"),l&&l.classList.add("hidden"))}),s.addEventListener("blur",()=>{i||(s.value=c,s.classList.add("hidden"),n.classList.remove("hidden"),l&&l.classList.add("hidden")),i=!1}),r.appendChild(a),r.appendChild(n);let l=null;if(e==="Password :"){const u=document.createElement("button");u.type="button",u.textContent="Afficher",u.className="text-sm text-txt1 underline whitespace-nowrap",u.addEventListener("mousedown",b=>{b.preventDefault()}),u.addEventListener("click",()=>{s.type=s.type==="password"?"text":"password",u.textContent=s.type==="password"?"Afficher":"Masquer"}),l=document.createElement("div"),l.className="hidden flex items-center gap-2 mt-1 ml-2",l.appendChild(s),l.appendChild(u),r.appendChild(l)}else r.appendChild(s);return{element:r,getValue:()=>s.value,setValue:u=>{c=u,s.value=u,e==="Password :"?n.textContent="••••••":n.textContent=u}}}async function le(e,t,o,r,a){fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({[t]:r,[o]:a})}).then(n=>{if(!n.ok)throw new Error(`Erreur HTTP : ${n.status}`);return alert("Done!"),n.json()}).then(n=>{console.log(ae(e,!0),n)}).catch(n=>{console.error(ae(e,!1),n),alert("Nop!")})}function ae(e,t){if(e==="https://transcendence.42.fr:42069/api/friends/add"&&t===!0)return"Ajout d'ami réussie :";if(e==="https://transcendence.42.fr:42069/api/friends/add"&&t===!1)return"Erreur lors de l’ajout d'ami :";if(e==="https://transcendence.42.fr:42069/api/auth/login"&&t===!0)return"Connnexion réussie :";if(e==="https://transcendence.42.fr:42069/api/auth/login"&&t===!1)return"Erreur lors de la connexion :";if(e==="https://transcendence.42.fr:42069/api/auth/register"&&t===!0)return"Inscription réussie :";if(e==="https://transcendence.42.fr:42069/api/auth/register"&&t===!1)return"Erreur lors de l’inscription :"}const Ie=new B(()=>{document.body.classList.remove("bg-bg1"),document.body.classList.add("bg-bg2"),document.body.classList.remove("fade-out"),document.body.classList.add("fade-in");const e=document.createElement("div"),t=document.createElement("div");t.className="flex justify-center";const o=document.createElement("button");o.className="underline ml-[5%] text-bg0",o.textContent=p.back,o.addEventListener("click",f=>{f.preventDefault(),j("/")}),e.appendChild(o);const r=document.createElement("div");r.className="bg-bg1 border-bg0 border-4 px-30 py-30 my-[10%] rounded-3xl";const a=document.createElement("p");a.className="text-bg0 font-bitcount hover:cursor-default text-4xl text-center -mt-[35%]",a.textContent=p.lTitle,r.appendChild(a);const n=document.createElement("form");n.className="grid";const s=S("text","Username","Username","p-2 bg-bg0 mt-[28%] text-center rounded-sm"),c=S("password","Password","Password","p-2 bg-bg0 mt-2 text-center rounded-sm"),i=document.createElement("button");i.type="button",i.textContent=p.lButton1,i.className="ml-2 text-sm text-txt1 underline whitespace-nowrap w-[70px] overflow-hidden text-center -mr-10";const l=document.createElement("div");l.className="flex items-center mt-2",l.appendChild(c),l.appendChild(i),i.addEventListener("click",()=>{c.type=c.type==="password"?"text":"password",i.textContent=c.type==="password"?p.iButton1:p.iButton2});const u=S("submit","","Valider","py-1 bg-txt1 text-bg0 text-xl mt-3 text-center rounded-sm");u.value="Se connecter",n.appendChild(s),n.appendChild(l),n.appendChild(u),r.appendChild(n),n.onsubmit=f=>{f.preventDefault();const y=s.value.trim(),L=c.value.trim();if(!y||!L){alert("Veuillez remplir tous les champs.");return}le("https://transcendence.42.fr:42069/api/auth/login","username","password",y,L)};const b=document.createElement("p");b.className="text-bg0 text-center mt-1 mb-1",b.textContent="or",r.appendChild(b);const g=document.createElement("a");g.className="text-bg1 bg-bg0 ml-[30%] py-1 px-5",g.textContent="GOOGLE",r.appendChild(g);const h=document.createElement("div");h.className="mt-20 -mb-20 text-bg0";const m=document.createElement("button");m.className="hover:cursor-pointer ml-60 -mr-70 underline text-sm",m.textContent=p.rSubmit;const x=document.createElement("button");return x.className="hover:cursor-pointer -ml-20 underline text-sm",x.textContent=p.lOther1,m.addEventListener("click",f=>{f.preventDefault(),j("/register")}),x.addEventListener("click",f=>{f.preventDefault(),j("/forgot-password")}),h.appendChild(m),h.appendChild(x),r.appendChild(h),t.appendChild(r),e.appendChild(t),e}),ke=new B(()=>{document.body.classList.remove("fade-out"),document.body.classList.add("fade-in"),document.body.classList.remove("bg-bg2"),document.body.classList.add("bg-bg1");const e=document.createElement("div"),t=new K("/"),o=document.createElement("button");o.className="underline ml-[5%] text-bg0",o.textContent=p.back,t.appendChild(o),e.appendChild(t.make());const r=document.createElement("button");r.textContent="Pause",r.className="absolute top-4 left-4 px-3 py-1 bg-gray-800 text-white rounded cursor-pointer z-10",e.appendChild(r);const a=document.createElement("div");a.className="flex justify-center";const n=document.createElement("div");n.className="absolute mt-10 left-1/2 transform -translate-x-1/2 text-bg0 text-4xl font-mono z-10 select-none";const s=document.createElement("canvas");s.className="block bg-bg2 border-4 border-bg0",a.appendChild(n),a.appendChild(s),e.appendChild(a);const c=s.getContext("2d"),i=window.innerWidth-30,l=window.innerHeight-40;function u(){const d=window.devicePixelRatio||1;s.width=i*d,s.height=l*d,c.setTransform(1,0,0,1,0,0),c.scale(d,d)}u(),window.addEventListener("resize",u);let b;(d=>{d[d.READY=0]="READY",d[d.PLAYING=1]="PLAYING",d[d.PAUSED=2]="PAUSED",d[d.WIN=3]="WIN",d[d.LOSE=4]="LOSE"})(b||(b={}));let g=0;const h=10,m=100,x=6;let f=(l-m)/2,y=(l-m)/2,L=!1,A=!1,$=!1,k=!1;window.addEventListener("keydown",d=>{d.key==="ArrowUp"&&(L=!0),d.key==="ArrowDown"&&(A=!0),(d.key==="w"||d.key==="W")&&($=!0),(d.key==="s"||d.key==="S")&&(k=!0)}),window.addEventListener("keyup",d=>{d.key==="ArrowUp"&&(L=!1),d.key==="ArrowDown"&&(A=!1),(d.key==="w"||d.key==="W")&&($=!1),(d.key==="s"||d.key==="S")&&(k=!1)});const w=10;let T=i/2-w/2,E=l/2-w/2,D=5,P=3,N=1;const M=.1,R=2.5;let F=0,C=0;const v=5;function _(d){T=i/2-w/2,E=l/2-w/2,D=d?5:-5,P=Math.random()*4-2,N=1}function z(){n.textContent=`${F}  —  ${C}`}function Y(d,J,H){const W=document.createElement("div");W.className="absolute inset-0 flex flex-col items-center justify-center bg-black bg-opacity-70 text-white z-20";const X=document.createElement("div");X.textContent=d,X.className="text-5xl mb-6";const q=document.createElement("button");return q.textContent=J,q.className="px-4 py-2 bg-white text-black rounded text-xl",q.onclick=()=>{W.remove(),H()},W.appendChild(X),W.appendChild(q),W}function Z(){F=0,C=0,z(),_(!1),g=1}const ie=Y("Ready?","Start Game",()=>{g=1});e.appendChild(ie);function de(){$&&(f-=x),k&&(f+=x),L&&(y-=x),A&&(y+=x),f=Math.max(0,Math.min(l-m,f)),y=Math.max(0,Math.min(l-m,y)),T+=D*N,E+=P*N,(E<=0||E+w>=l)&&(P*=-1);const d=T<=30+h&&E+w>=f&&E<=f+m,J=T+w>=i-30-h&&E+w>=y&&E<=y+m;if((d||J)&&(D*=-1,N=Math.min(N+M,R)),T<0)if(C++,z(),C>=v){g=4;const H=Y("You Lose 😢","Play Again",Z);e.appendChild(H)}else _(!0);else if(T>i)if(F++,z(),F>=v){g=3;const H=Y("You Win 🎉","Play Again",Z);e.appendChild(H)}else _(!1)}function ue(){c.clearRect(0,0,i,l),c.strokeStyle="gray",c.setLineDash([5,5]),c.beginPath(),c.moveTo(i/2,0),c.lineTo(i/2,l),c.stroke(),c.setLineDash([]),c.fillStyle="white",c.fillRect(30,f,h,m),c.fillRect(i-30-h,y,h,m),c.fillRect(T,E,w,w)}let U=!1;r.onclick=()=>{(g===1||g===2)&&(U=!U,g=U?2:1,r.textContent=U?"Resume":"Pause")};function ee(){g===1&&!U?(de(),ue()):g===2&&(c.fillStyle="rgba(0,0,0,0.5)",c.fillRect(0,0,i,l),c.fillStyle="white",c.font="48px sans-serif",c.textAlign="center",c.fillText("Paused",i/2,l/2)),requestAnimationFrame(ee)}return z(),ee(),e}),Te=new B(()=>{document.body.classList.remove("fade-out"),document.body.classList.add("fade-in"),document.body.classList.remove("bg-bg2"),document.body.classList.add("bg-bg1");const e=document.createElement("div"),t=new K("/"),o=document.createElement("button");return o.className="underline ml-[5%] text-bg0",o.textContent=p.back,t.appendChild(o),e.appendChild(t.make()),e});function Pe(e){const t=document.createElement("div");t.className="border-t border-bg0";const o=document.createElement("button");o.className="w-full text-left text-bg0 p-2 hover:bg-bg2 focus:outline-none flex justify-between items-center",o.textContent=`VS ${e.opponent} - ${e.score}`;const r=document.createElement("span");r.textContent="+",o.appendChild(r);const a=document.createElement("div");return a.className="text-bg0 pl-4 pr-2 py-2 hidden bg-bg2",a.innerHTML=`
		<p><strong>Date:</strong> ${e.date}</p>
		<p><strong>Touch_blue:</strong> ${e.touch_blue}</p>
		<p><strong>Touch_red:</strong> ${e.touch_red}</p>
		<p><strong>Score:</strong> ${e.score}</p>
	`,o.addEventListener("click",()=>{const n=!a.classList.contains("hidden");a.classList.toggle("hidden"),r.textContent=n?"+":"−"}),t.appendChild(o),t.appendChild(a),t}function se(e,t,o){const r=document.createElement("div");r.className="flex items-center justify-between bg-txt1 p-2 mx-2 my-1 rounded shadow";const a=document.createElement("div");a.className="flex items-center space-x-3";const n=document.createElement("img");n.src="test.jpeg",n.alt=`${e} avatar`,n.className="w-10 h-10 rounded-full object-cover border border-bg0";const s=document.createElement("div");s.className="flex flex-col";const c=document.createElement("p");c.className="text-bg0 font-bold",c.textContent=e;const i=document.createElement("div");i.className="flex items-center space-x-1";const l=document.createElement("span");l.className="w-3 h-3 rounded-full";const u=document.createElement("span");u.className="text-xs text-bg0",i.appendChild(l),i.appendChild(u),s.appendChild(c),s.appendChild(i),a.appendChild(n),a.appendChild(s);const b=document.createElement("div");b.className="flex space-x-2";const g=document.createElement("button");g.className="bg-bg0 text-txt0 px-2 py-1 rounded hover:bg-bg2 transition",g.textContent=p.pButton2,g.onclick=()=>{console.log(`Voir profil de ${e}`)};const h=document.createElement("button");h.className="bg-bg0 text-txt0 px-2 py-1 rounded hover:bg-bg2 transition",h.textContent=p.pButton3,h.onclick=()=>{console.log(`Envoyer une demande de match à ${e}`)};const m=document.createElement("button");m.className="bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700 transition",m.textContent=p.pButton4,m.onclick=()=>{confirm(`Supprimer ${e} ?`)&&(console.log(`Supprimé ${e}`),r.remove())},b.appendChild(g),b.appendChild(h),b.appendChild(m),r.appendChild(a),r.appendChild(b);function x(f){switch(l.className="w-3 h-3 rounded-full",u.textContent=f==="in-game"?"En jeu":f==="online"?"En ligne":"Hors ligne",f){case"online":l.classList.add("bg-green-500");break;case"in-game":l.classList.add("bg-yellow-500");break;default:l.classList.add("bg-gray-400");break}}return x(t),r.setStatus=x,Object.assign(r,{setStatus:x})}const Se=new B(()=>{document.body.classList.remove("fade-out"),document.body.classList.add("fade-in"),document.body.classList.remove("bg-bg1"),document.body.classList.add("bg-bg2");const e=document.createElement("div");if(Q===0)return j("/"),e;e.className="font-CaveatBrush";const t=new K("/"),o=document.createElement("button");o.className="underline ml-[5%] text-bg0",o.textContent=p.back,t.appendChild(o),e.appendChild(t.make());const r=document.createElement("button");r.className="ml-[80%] text-bg0 underline",r.textContent=p.disc,e.appendChild(r);const a=document.createElement("h2");a.className="flex justify-center font-bitcount text-bg0 text-8xl bg-bg21 mx-[35%] mt-[1%]",a.textContent=p.pTitle1,e.appendChild(a);const n=document.createElement("div");n.className="w-32 h-32 rounded-full bg-bg0 overflow-hidden flex items-center justify-center relative text-center text-sm -mb-[1%] ml-[15%]";const s=document.createElement("img");s.className="w-full h-full object-cover absolute top-0 left-0 text-bg0",s.alt="Image de profile";async function c(C){const v=await fetch(`https://transcendence.42.fr:42069/api/auth/avatar/${C}`);if(!v.ok){console.error("Impossible de charger l'avatar");return}const _=await v.json();s.src=_.avatarUrl}c("test1234");const i=document.createElement("span");i.textContent=p.pImage,n.appendChild(s),n.appendChild(i),e.appendChild(n);const l=document.createElement("div");l.className="flex items-center gap-2 px-2 mt-2";const u=document.createElement("button");u.textContent="Upload avatar",u.className="bg-bg0 text-txt0 px-4 py-1 rounded hover:shadow-md hover:bg-txt1 transition";const b=S("file","","avatarInput","bg-txt0 flex items-center gap-2 px-2 mt-2");l.appendChild(u),l.appendChild(b);let g=null;b.addEventListener("change",C=>{g=C.target.files?.[0]||null}),u.addEventListener("click",async()=>{if(!g){alert("Aucun fichier sélectionné.");return}if(!/^image\/(jpeg|png)$/.test(g.type)){alert("Formats autorisés: JPG/PNG.");return}if(g.size>2097152){alert("Taille max: 2 Mo.");return}const C=new FormData;C.append("file",g),C.append("username","test1234");try{const v=await fetch("https://transcendence.42.fr:42069/api/auth/upload",{method:"PATCH",body:C,credentials:"include"});if(!v.ok)throw new Error(`HTTP ${v.status}`);alert("Upload réussi ✅")}catch(v){console.log("Échec de l’upload: ",v.message),alert("Échec de l’upload: "+v.message)}});const h=document.createElement("div");h.className="grid grid-cols-3 gap-8 mt-[2%] mx-[1%]";const m=document.createElement("div");m.className="col-span-1 grid gap-4 bg-bg1 border-bg0 border-8 mr-[10%] pb-[45%]";const x=document.createElement("p");x.className="text-center text-bg0 mt-3 text-4xl",x.textContent=p.pTitle2;const f=oe("Username :","username"),y=oe("Password :","••••••"),L=document.createElement("p");L.className="text-bg0 ml-1",L.textContent="Winrate :";const A=document.createElement("p"),$=55;A.textContent=`${$}%`,A.className="ml-1 text-txt0 bg-bg0 mr-[50%] text-center -mt-2",m.appendChild(x),m.appendChild(f.element),m.appendChild(y.element),m.appendChild(l),m.appendChild(L),m.appendChild(A);const k=document.createElement("div");k.className="col-span-1 grid bg-bg1 border-bg0 border-8 -mx-[9%]";const w=document.createElement("p");w.className="text-center text-4xl text-bg0 mt-3",w.textContent=p.pTitle3,k.appendChild(w),[{opponent:"Player123",date:"2025-08-01",touch_blue:1,touch_red:10,score:"10 - 7"},{opponent:"Player123",date:"2025-08-01",touch_blue:1,touch_red:10,score:"10 - 7"},{opponent:"Player123",date:"2025-08-01",touch_blue:1,touch_red:10,score:"10 - 7"},{opponent:"Player123",date:"2025-08-01",touch_blue:1,touch_red:10,score:"10 - 7"},{opponent:"Player123",date:"2025-08-01",touch_blue:1,touch_red:10,score:"10 - 7"},{opponent:"Player123",date:"2025-08-01",touch_blue:1,touch_red:10,score:"10 - 7"},{opponent:"Player123",date:"2025-08-01",touch_blue:1,touch_red:10,score:"10 - 7"}].slice(0,7).forEach(C=>{const v=Pe(C);k.appendChild(v)});const E=document.createElement("div");E.className="col-span-1 bg-bg1 border-bg0 border-8 ml-[10%]";const D=document.createElement("p");D.className="text-center text-4xl text-bg0 mt-3",D.textContent=p.pTitle4,E.appendChild(D);const P=document.createElement("div");P.className="flex items-center gap-2 px-2 mt-2";const N=document.createElement("input");N.type="text",N.placeholder=p.pInput,N.className="flex-1 px-2 py-1 rounded border border-bg0";const M=document.createElement("button");M.textContent=p.pButton1,M.className="bg-bg0 text-txt0 px-4 py-1 rounded hover:bg-bg2 transition";const R=document.createElement("div");return R.className="mt-4",M.onclick=()=>{const C=N.value.trim();if(C!==""){const v=se(C,"in-game");R.appendChild(v),N.value=""}},P.appendChild(N),P.appendChild(M),E.appendChild(P),E.appendChild(R),["Alice","Bob","Charlie"].forEach(C=>{const v=se(C,"online");R.appendChild(v)}),h.appendChild(m),h.appendChild(k),h.appendChild(E),e.appendChild(h),e}),Be=new B(()=>{document.body.classList.remove("bg-bg1"),document.body.classList.add("bg-bg2"),document.body.classList.remove("fade-out"),document.body.classList.add("fade-in");const e=document.createElement("div"),t=document.createElement("div");t.className="flex justify-center";const o=document.createElement("button");o.className="underline ml-[5%] text-bg0",o.textContent="retour",o.addEventListener("click",g=>{g.preventDefault(),j("/")}),e.appendChild(o);const r=document.createElement("div");r.className="bg-bg1 border-bg0 border-4 px-30 py-30 my-[10%] rounded-3xl";const a=document.createElement("p");a.className="text-bg0 font-bitcount hover:cursor-default text-5xl text-center -mt-[35%] -mx-7",a.textContent="INSCRIPTION",r.appendChild(a);const n=document.createElement("form");n.className="grid";const s=S("text","Username","Username","p-2 bg-bg0 mt-[26%] text-center"),c=S("password","New Password","New Password","p-2 bg-bg0 mt-2 text-center"),i=S("password","New Password","New New Password","p-2 bg-bg0 mt-2 text-center"),l=S("submit","","Valider","font-caveat py-1 bg-txt1 text-bg0 text-xl mt-3 text-center rounded-sm");l.value="S'inscrire",n.appendChild(s),n.appendChild(c),n.appendChild(i),n.appendChild(l),r.appendChild(n),n.onsubmit=g=>{g.preventDefault();const h=s.value.trim(),m=c.value.trim(),x=i.value.trim();if(!h||!m||!x){alert("Veuillez remplir tous les champs.");return}if(m!==x){alert("Les mots de passes ne sont pas identiques!");return}le("https://transcendence.42.fr:42069/api/auth/register","username","password",h,m)};const u=document.createElement("p");u.className="text-bg0 text-center mt-1 mb-1",u.textContent="or",r.appendChild(u);const b=document.createElement("a");return b.className="text-bg1 bg-bg0 ml-[31%] py-1 px-5",b.textContent="GOOGLE",r.appendChild(b),t.appendChild(r),e.appendChild(t),e}),Ae=new B(()=>{document.body.classList.remove("fade-out"),document.body.classList.add("fade-in"),document.body.classList.remove("bg-bg1"),document.body.classList.add("bg-bg2");const e=document.createElement("div");e.className="flex justify-center ";const t=document.createElement("p");return t.className="text-8xl text-bg0 mt-[20%]",t.textContent="Work In Progress",e.appendChild(t),e}),De=new B(()=>{document.body.classList.remove("fade-out"),document.body.classList.add("fade-in"),document.body.classList.remove("bg-bg1"),document.body.classList.add("bg-bg2");const e=document.createElement("div");e.className="flex justify-center ";const t=document.createElement("p");return t.className="text-8xl text-bg0 mt-[20%]",t.textContent="Work In Progress",e.appendChild(t),e}),I=V.getInstance();I.register("/",Le);I.register("/login",Ie);I.register("/game",ke);I.register("/tournament",Te);I.register("/profile",Se);I.register("/register",Be);I.register("/forgot-password",Ae);I.register("/view-profile",De);I.launch();
